<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Map Editor</title>
    <link rel="stylesheet" href="src/styles.css" />
    <style>
      body { display: grid; grid-template-columns: 360px 1fr; height: 100vh; }
      #sidebar { background: #1b1f23; padding: 12px; overflow: auto; border-right: 1px solid rgba(255,255,255,0.08); }
      #editorCanvas { width: 100%; height: 100%; display: block; background: #0e1013; cursor: crosshair; }
      .palette { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; }
      .color { height: 28px; border: 2px solid rgba(255,255,255,0.2); cursor: pointer; }
      .color.active { border-color: #fff; }
      .row { margin: 8px 0; }
      .label { font-size: 12px; opacity: 0.9; margin-bottom: 4px; }
      .btn { padding: 6px 10px; background: #4a90e2; color: #fff; border: none; border-radius: 6px; cursor: pointer; }
      input[type=number] { width: 80px; }
      /* Two-column legend for compactness */
      .legend-list { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 6px 12px; }
      .legend-item { display: flex; align-items: center; gap: 6px; min-height: 16px; }
    </style>
  </head>
  <body>
    <div class="top-actions">
      <a class="btn-nav" href="index.html">Exit Editor</a>
    </div>
    <div id="sidebar">
      <h2>Map Editor</h2>
      <div class="row">
        <div class="label">Canvas Size</div>
        <input type="number" id="w" value="80" min="8" step="1" /> Ã—
        <input type="number" id="h" value="60" min="8" step="1" />
        <button class="btn" id="resize">Resize</button>
      </div>
      <div class="row">
        <div class="label">Palette (click to select)</div>
        <div id="palette" class="palette"></div>
      </div>
      <div class="row">
        <div class="label">Brush</div>
        <input type="number" id="brush" value="1" min="1" max="10" step="1" />
        <label><input type="checkbox" id="flood" /> Flood Fill</label>
      </div>
      <div class="row">
        <div class="label">History</div>
        <button class="btn" id="undoBtn" title="Undo (Ctrl+Z)">Undo</button>
        <button class="btn" id="redoBtn" title="Redo (Ctrl+Y / Ctrl+Shift+Z)">Redo</button>
      </div>
      <div class="row">
        <div class="label">Current Brush</div>
        <div id="brush-info" style="font-size:12px; opacity:0.9"></div>
      </div>
      <div class="row">
        <div class="label">Import PNG</div>
        <input type="file" id="importPng" accept="image/png,image/jpeg" />
      </div>
      <div class="row">
        <button class="btn" id="exportPng">Export PNG</button>
      </div>
      <div class="row">
        <div class="label">Hover</div>
        <div id="hover-info" style="font-size:12px; opacity:0.9"></div>
      </div>
      <div class="row">
        <div class="label">Legend</div>
        <ul id="legend-list" style="font-size:12px; line-height:1.8; list-style:none; padding:0; margin:0"></ul>
      </div>
    </div>
    <canvas id="editorCanvas"></canvas>
    <script type="module" src="src/editor.js"></script>
  </body>
  </html>
